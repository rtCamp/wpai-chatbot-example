# ===== ENVIRONMENT CONFIGURATION =====
#
# This file contains all environment variables used across the entire platform.
# Copy this file to .env and fill in the appropriate values.
# 
# Structure:
# - Shared variables (used across multiple apps)
# - API-specific variables  
# - Chat app variables
# - Dashboard app variables
# - RAG app variables (uses shared variables)
# ======

# ===== SHARED VARIABLES =====
# Used by: API, RAG, Chat, Dashboard

NODE_ENV=development # Environment (development, production, etc.)

# Main API key for authenticating requests between services
API_KEY=

# Database configuration
POSTGRES_USER=user # PostgreSQL username
POSTGRES_PASSWORD=password # PostgreSQL password  
POSTGRES_DB=wpai-chatbot # Main database name

# Main database connection URL for Prisma
DATABASE_URL=postgresql://user:password@postgres:5432/wpai-chatbot

# Chat database connection URL (separate database for chat functionality)
DATABASE_CHAT_URL=postgresql://user:password@localhost:5432/deepsearch-chat

# Redis configuration for caching and sessions
REDIS_HOST=redis # Redis host
REDIS_PORT=6379 # Redis port

# Internal service URLs
AUTH_HOST=localhost:6001 # Logto authentication service host
API_HOST=localhost:3001 # Main API service host  
MAIN_HOST=localhost:3000 # Main application host
DASHBOARD_URL=http://localhost:3002 # Dashboard application URL
API_BASE_URL=http://localhost:3000 # API base URL (for internal service communication)

# External service endpoints
NLP_API_ENDPOINT=http://nlp:3100 # Natural Language Processing service endpoint
FIRECRAWL_ENDPOINT=http://firecrawl:3003 # Web scraping service endpoint

# AI/ML Service APIs
OPEN_AI_API_ENDPOINT=https://api.openai.com/v1 # OpenAI API endpoint
OPEN_AI_ASSISTANT_ID= # OpenAI Assistant ID for chat functionality
OPEN_AI_API_KEY= # OpenAI API key

GEMINI_API_KEY= # Google Gemini API key

# Vector Database Configuration
PINECONE_API_KEY= # Pinecone vector database API key
PINECONE_INDEX_HOST= # Pinecone index host URL

WEAVIATE_HOST=weaviate # Weaviate vector database host
WEAVIATE_PORT=8080 # Weaviate port
WEAVIATE_API_KEY= # Weaviate API key

# Authentication Service (Logto)
LOGTO_CORE_PORT=6001 # Logto core service port
LOGTO_ADMIN_PORT=6002 # Logto admin panel port
LOGTO_TRUST_PROXY_HEADER=true # Trust proxy headers for Logto
LOGTO_DB_URL=postgres://logto-root:root@logto-postgres:5432/logto # Logto database URL
LOGTO_POSTGRES_DB=logto # Logto database name
LOGTO_POSTGRES_USER=logto-root # Logto database user
LOGTO_POSTGRES_PASSWORD=root # Logto database password
LOGTO_ENDPOINT=http://localhost:6001 # Logto core endpoint
LOGTO_ADMIN_ENDPOINT=http://localhost:6002 # Logto admin endpoint

# Security
RECAPTCHA_SECRET_KEY= # Google reCAPTCHA secret key for bot protection

# ===== CHAT APP SPECIFIC =====
# Used by: /apps/chat

# Public environment variables (exposed to frontend)
NEXT_PUBLIC_BASE_URL=http://localhost:3001 # Chat app public URL
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000 # API base URL for frontend
NEXT_PUBLIC_API_KEY= # API key for frontend requests
NEXT_PUBLIC_CSRF_TOKEN= # CSRF token for security
NEXT_PUBLIC_CSRF_TOKEN_KEY=WPAI_CHATBOT-XSRF-TOKEN # CSRF token header key
NEXT_PUBLIC_RECAPTCHA_SITE_KEY= # Google reCAPTCHA site key (public)
NEXT_PUBLIC_DASHBOARD_URL=http://localhost:3002 # Dashboard URL for navigation

# Logto authentication for Chat app
LOGTO_APP_ID= # Logto application ID for chat app
LOGTO_APP_SECRET= # Logto application secret for chat app
LOGTO_COOKIE_SECRET= # Secret for encrypting cookies
LOGTO_M2M_APP_ID= # Logto machine-to-machine app ID
LOGTO_M2M_APP_SECRET= # Logto machine-to-machine app secret

# iframe security configuration
ALLOWED_IFRAME_ORIGINS=localhost:3001,wpai-chatbot-plugin.local,localhost:3002,localhost:10008 # Allowed origins for iframe embedding

# ===== DASHBOARD APP SPECIFIC =====
# Used by: /apps/dashboard

# Public environment variables (exposed to frontend)
NEXT_PUBLIC_DATABASE_BASE_URL=http://localhost:3002 # Dashboard app public URL

# ===== WORDPRESS PLUGIN INTEGRATION =====
# Used by: WordPress plugin and form integrations

FORM_ORIGIN= # Allowed origin for form submissions
WPAI_CHATBOT_MAIN_SITE_DOMAIN= # Main site domain for WordPress integration
WPAI_CHATBOT_PLUGIN_SITE= # WordPress site URL where plugin is installed

# Calendar Integration (Frappe)
FRAPPE_APPOINTMENT_SLUG= # Frappe appointment booking slug
FRAPPE_DURATION_SLUG= # Frappe appointment duration slug

# Sales Tracking
SALESPANEL_TOKEN= # SalesPanel tracking token

# ===== GOOGLE SERVICES INTEGRATION =====
# Used by: Google Docs integration and services

GOOGLE_DOCS_PROJECT_ID= # Google Cloud project ID
GOOGLE_DOCS_PRIVATE_KEY_ID= # Google service account private key ID  
GOOGLE_DOCS_PRIVATE_KEY= # Google service account private key (multiline)
GOOGLE_DOCS_CLIENT_MAIL= # Google service account email
GOOGLE_DOCS_CLIENT_ID= # Google service account client ID
GOOGLE_DOCS_CLIENT_X509_CERT_URL= # Google service account certificate URL
